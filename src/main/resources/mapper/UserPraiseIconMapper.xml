<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lx.dao.UserPraiseIconMapper" >
  <resultMap id="BaseResultMap" type="com.lx.model.UserPraiseIcon" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="state_praise" property="statePraise" jdbcType="INTEGER" />
    <result column="state_icon" property="stateIcon" jdbcType="INTEGER" />
    <result column="userid" property="userid" jdbcType="INTEGER" />
    <result column="vid" property="vid" jdbcType="INTEGER" />
  </resultMap>
  <insert id="insert" parameterType="com.lx.model.UserPraiseIcon" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into user_praise_icon (state_praise, state_icon, userid, 
      vid)
    values (#{statePraise,jdbcType=INTEGER}, #{stateIcon,jdbcType=INTEGER}, #{userid,jdbcType=INTEGER}, 
      #{vid,jdbcType=INTEGER})
  </insert>


  <!-- 查询点赞状态 返回1 表示已经点赞，0表示未点赞  SELECT state_praise=1 from user_praise_icon where userid=1 and vid=1-->
  <select id="if_praised" parameterType="java.lang.Integer" resultType="java.lang.Integer">
    SELECT IFNULL((SELECT state_praise from user_praise_icon where userid=#{userid,jdbcType=INTEGER} and vid=#{vid,jdbcType=INTEGER}),0)
  </select>

  <!-- /*修改为点赞状态*/-->
  <update id="praised" parameterType="com.lx.model.UserPraiseIcon">
    UPDATE user_praise_icon SET state_praise = 1
    where userid=#{userids,jdbcType=INTEGER}
    and vid=#{vids,jdbcType=INTEGER}
  </update>

  <!-- /*修改为取消点赞状态*/-->
  <update id="Cancel_praised" parameterType="com.lx.model.UserPraiseIcon">
    UPDATE user_praise_icon SET state_praise = 0
    where userid=#{userids,jdbcType=INTEGER}
    and vid=#{vids,jdbcType=INTEGER}
  </update>

  <!--点赞记录-->
  <insert id="add_praise_tab" parameterType="com.lx.model.UserPraiseIcon">
    insert into user_praise_icon (state_praise,userid, vid)
    VALUES (#{statePraise,jdbcType=INTEGER}, #{userid,jdbcType=INTEGER},
    #{vid,jdbcType=INTEGER})
  </insert>


  <!--查询投币状态-->
  <select id="if_giveCoin" parameterType="java.lang.Integer" resultType="java.lang.Integer">
      SELECT IFNULL((SELECT state_icon from user_praise_icon where userid=#{userid,jdbcType=INTEGER} and vid=#{vid,jdbcType=INTEGER}),0)
  </select>

  <!--修改投币状态-->
  <update id="giveCoined" parameterType="com.lx.model.UserPraiseIcon">
    UPDATE user_praise_icon SET state_icon = 1
    where userid=#{userid,jdbcType=INTEGER}
    and vid=#{vid,jdbcType=INTEGER}
  </update>

  <!--投币记录-->
  <insert id="add_Coin_tab" parameterType="com.lx.model.UserPraiseIcon">
    insert into user_praise_icon (state_icon,userid, vid)
    VALUES (#{stateIcon,jdbcType=INTEGER}, #{userid,jdbcType=INTEGER},
    #{vid,jdbcType=INTEGER})
  </insert>
</mapper>