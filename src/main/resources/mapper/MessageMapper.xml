<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lx.dao.MessageMapper" >
  <resultMap id="BaseResultMap" type="com.lx.model.Message" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <!--<result column="userid" property="userid" jdbcType="INTEGER" />-->
    <id column="mess_id" property="messId" jdbcType="INTEGER"/>
    <result column="vid" property="vid" jdbcType="INTEGER" />
    <result column="send_time" property="sendTime" jdbcType="VARCHAR" />
    <result column="comment" property="comment" jdbcType="LONGVARCHAR" />
    <association property="user" javaType="com.lx.model.User">
      <id column="userid" property="userid" jdbcType="INTEGER"/>
      <result column="username" property="username" jdbcType="VARCHAR"/>
      <result column="head_img" property="headImg" jdbcType="VARCHAR"/>
    </association>
  </resultMap>


  <!--查询评论-->
  <select id="selectMessByVid" resultMap="BaseResultMap" parameterType="java.lang.Integer">
    select `user`.username ,`user`.head_img,message.* from
    `user` inner JOIN message
    on `user`.userid = message.userid
    where message.vid =  #{vid,jdbcType=INTEGER}
  </select>


  <!--发送评论-->
  <insert id="sendMess" parameterType="com.lx.model.Message" >
    insert into message(userid,vid,comment,send_time)
    values
    (#{userid,jdbcType=INTEGER},#{vid,jdbcType=INTEGER},#{comment,jdbcType=LONGVARCHAR},#{sendTime,jdbcType=VARCHAR})
  </insert>


  <delete id="deleteMess" parameterType="java.lang.Integer">
    delete from message where mess_id = #{messId,jdbcType=INTEGER}
  </delete>
</mapper>
